<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í—¤ì•„ë¦¼ (Hearim) - Final</title>
    <style>
        /* ====================
           1. ê¸°ë³¸ ì„¤ì • & ë ˆì´ì•„ì›ƒ
           ==================== */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background-color: #222; /* ì•± ì§‘ì¤‘ì„ ìœ„í•´ ì–´ë‘ìš´ ë°°ê²½ */
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; user-select: none; 
        }
        .app-container { 
            width: 100%; max-width: 400px; height: 800px; 
            background-color: white; border-radius: 20px; overflow: hidden; 
            position: relative; display: flex; flex-direction: column; 
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }

        /* í™”ë©´ ì „í™˜ìš© í´ë˜ìŠ¤ */
        .screen { 
            padding: 20px; flex: 1; display: none; 
            flex-direction: column; overflow-y: auto; padding-bottom: 100px; 
        }
        .screen.active { display: flex; }

        /* í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .hero-text { font-size: 24px; font-weight: 800; margin-top: 40px; margin-bottom: 10px; color: #333; word-break: keep-all; }
        .sub-text { color: #666; margin-bottom: 30px; line-height: 1.5; }

        /* ê³µí†µ ë²„íŠ¼ */
        .big-btn { 
            background-color: #3182f6; color: white; border: none; padding: 18px; 
            border-radius: 15px; font-size: 18px; font-weight: bold; cursor: pointer; 
            width: 100%; margin-top: auto; margin-bottom: 20px; 
        }

        /* ====================
           2. ìŠ¤í”Œë˜ì‹œ (ë¡œë”©) í™”ë©´
           ==================== */
        #splash-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: white; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 1.2s ease-in-out;
        }
        #splash-screen.show { opacity: 1; } 
        
        .logo-img { 
            width: 140px; margin-bottom: 20px; 
            animation: pulse-logo 2.5s infinite ease-in-out; 
        }
        .logo-text { 
            font-size: 40px; font-weight: 900; color: #2ac1bc; 
            letter-spacing: -1px; margin-top: 10px; 
        }
        @keyframes pulse-logo { 
            0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } 
        }

        /* ====================
           3. ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½ (Custom Alert)
           ==================== */
        .custom-alert-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6); z-index: 2000; /* ìµœìƒìœ„ */
            display: none; justify-content: center; align-items: center;
        }
        .custom-alert-box {
            background: white; width: 80%; padding: 30px 20px; border-radius: 24px;
            text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .alert-icon-circle {
            width: 60px; height: 60px; background: #e8f9e9; border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            margin: 0 auto 15px auto; color: #2e7d32; font-size: 30px;
        }
        .alert-title { font-size: 20px; font-weight: 800; color: #333; margin-bottom: 10px; }
        .alert-desc { font-size: 15px; color: #666; margin-bottom: 25px; line-height: 1.4; }
        .alert-btn {
            background-color: #3182f6; color: white; border: none; padding: 15px;
            border-radius: 12px; font-size: 16px; font-weight: bold; width: 100%; cursor: pointer;
        }

        /* ====================
           4. ì–´ë¥´ì‹  íŒì—…
           ==================== */
        .senior-modal { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background-color: rgba(0,0,0,0.7); z-index: 1000; 
            display: flex; justify-content: center; align-items: center; 
        }
        .modal-content { 
            background-color: white; width: 85%; border-radius: 20px; 
            padding: 30px 20px; text-align: center; 
        }
        .btn-yes { background-color: #2ac1bc; color: white; padding: 15px; width: 100%; border-radius: 12px; border: none; font-size: 20px; font-weight: bold; margin-bottom: 10px; cursor: pointer;}
        .btn-no { background-color: #f2f4f6; color: #666; padding: 15px; width: 100%; border-radius: 12px; border: none; font-size: 16px; font-weight: bold; cursor: pointer;}

        /* ====================
           5. UI ì»´í¬ë„ŒíŠ¸ (ì¹´ë“œ, ì…ë ¥ì°½ ë“±)
           ==================== */
        /* ì—­í•  ì¹´ë“œ */
        .role-card { 
            background: #fff; border: 2px solid #e5e8eb; border-radius: 20px; 
            padding: 30px 20px; margin-bottom: 20px; text-align: center; 
            cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; align-items: center; 
        }
        .role-card:hover { border-color: #3182f6; background-color: #f0f7ff; transform: translateY(-3px); }
        .role-icon { font-size: 40px; margin-bottom: 10px; }
        .role-title { font-size: 20px; font-weight: bold; margin-bottom: 5px; color: #333; }
        .role-desc { font-size: 14px; color: #888; }

        /* ì…ë ¥ ê·¸ë£¹ */
        .input-group { margin-bottom: 20px; }
        .input-label { display: block; font-weight: bold; margin-bottom: 8px; color: #333; }
        .input-field { width: 90%; padding: 15px; border: 2px solid #eee; border-radius: 12px; font-size: 16px; outline: none; transition: 0.3s; }
        .input-field:focus { border-color: #3182f6; }

        /* í˜œíƒ ì¹´ë“œ */
        .benefit-card { 
            background: #fff; border: 2px solid #e5e8eb; border-radius: 16px; 
            padding: 20px; margin-bottom: 15px; display: flex; align-items: center; 
            cursor: pointer; transition: 0.3s; 
        }
        .benefit-card.selected { border-color: #3182f6; background-color: #f0f7ff; transform: scale(1.02); }
        .checkbox { 
            width: 24px; height: 24px; border-radius: 50%; border: 2px solid #ccc; 
            margin-right: 15px; display: flex; align-items: center; justify-content: center; 
            color: transparent; background: white; transition: 0.2s; 
        }
        .benefit-card.selected .checkbox { border-color: #3182f6; background-color: #3182f6; color: white; }
        .info { flex: 1; }
        .b-title { font-weight: bold; font-size: 16px; margin-bottom: 4px; }
        .b-desc { font-size: 13px; color: #888; }
        .tag { font-size: 11px; background: #eee; padding: 3px 6px; border-radius: 4px; color: #555; }
        .tag.red { background: #ffebee; color: #d32f2f; font-weight: bold; }

        /* ì„œë¥˜ ì œì¶œ ì˜µì…˜ ì¹´ë“œ */
        .option-card { border: 2px solid #eee; border-radius: 16px; padding: 20px; margin-bottom: 15px; text-align: center; cursor: pointer; transition: 0.2s; }
        .option-card:hover { border-color: #3182f6; background-color: #f9fcff; }
        .option-card.auto { background-color: #f0f7ff; border-color: #3182f6; }
        .option-card.auto .opt-title { color: #3182f6; }
        .opt-icon { font-size: 30px; margin-bottom: 10px; display: block; }
        .opt-title { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
        .opt-desc { font-size: 13px; color: #666; }

        /* ====================
           6. í•˜ë‹¨ ë°” (Manual & Voice)
           ==================== */
        .manual-bar { 
            position: absolute; bottom: 0; left: 0; width: 100%; background: white; 
            padding: 20px; box-shadow: 0 -5px 20px rgba(0,0,0,0.1); box-sizing: border-box; 
            display: flex; justify-content: space-between; align-items: center; z-index: 50; 
        }
        .manual-btn { background: #333; color: white; border: none; padding: 15px 25px; border-radius: 12px; font-weight: bold; font-size: 16px; cursor: pointer; }

        .voice-bar { 
            position: absolute; bottom: 0; left: 0; width: 100%; height: 300px; 
            background: white; border-top-left-radius: 25px; border-top-right-radius: 25px; 
            box-shadow: 0 -5px 30px rgba(0,0,0,0.2); z-index: 100; 
            display: none; flex-direction: column; align-items: center; padding-top: 20px; 
            border-top: 5px solid #2ac1bc; transition: transform 0.3s ease-out; transform: translateY(100%); 
        }
        .voice-bar.active { display: flex; transform: translateY(0); }
        
        .voice-transcript { 
            font-size: 20px; color: #333; font-weight: 800; margin-bottom: 15px; 
            text-align: center; padding: 0 20px; height: 60px; 
            display: flex; align-items: center; justify-content: center;
        }
        
        /* ìŒì„± íŒŒí˜• ì• ë‹ˆë©”ì´ì…˜ */
        .wave-container { display: flex; height: 40px; align-items: center; margin-bottom: 15px; }
        .bar { width: 6px; background: #2ac1bc; margin: 0 4px; border-radius: 3px; animation: sound 1s infinite ease-in-out; }
        .bar:nth-child(1) { height: 15px; animation-delay: 0.1s; } 
        .bar:nth-child(2) { height: 30px; animation-delay: 0.2s; } 
        .bar:nth-child(3) { height: 40px; animation-delay: 0.3s; }
        @keyframes sound { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(1.8); } }

        /* ë¡œë”© ì˜¤ë²„ë ˆì´ */
        .loading-overlay { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(255,255,255,0.95); display: none; 
            justify-content: center; align-items: center; flex-direction: column; 
            z-index: 1500; text-align: center; 
        }
        .doc-icon { font-size: 50px; margin-bottom: 15px; display: block; }
    </style>
</head>
<body>

<div class="app-container">
    
    <div id="splash-screen">
        <img src="https://i.imgur.com/sdSwmX3.png" alt="í—¤ì•„ë¦¼ ë¡œê³ " class="logo-img">
        <div class="logo-text">í—¤ì•„ë¦¼</div>
    </div>

    <div id="custom-alert" class="custom-alert-overlay">
        <div class="custom-alert-box">
            <div class="alert-icon-circle">âœ…</div>
            <div class="alert-title" id="alert-title">ìŠ¹ì¸ ì™„ë£Œ</div>
            <div class="alert-desc" id="alert-desc">ê°€ì¡±ì˜ ë™ì˜ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.</div>
            <button class="alert-btn" onclick="closeCustomAlert()">í™•ì¸</button>
        </div>
    </div>

    <div id="senior-modal" class="senior-modal" style="display:none;">
        <div class="modal-content">
            <div style="font-size: 22px; font-weight: bold; margin-bottom: 20px;">
                ê¸€ìê°€ ì‘ì•„ì„œ<br>ë¶ˆí¸í•˜ì‹œë©´ í†µí™”ë¡œ í• ê¹Œìš”?
            </div>
            <button class="btn-yes" onclick="startVoiceMode()">ë„¤, í†µí™”ë¡œ í• ê²Œìš”</button>
            <button class="btn-no" onclick="closeModal()">ì•„ë‹ˆìš”, ê´œì°®ìŠµë‹ˆë‹¤</button>
        </div>
    </div>

    <div id="screen-role" class="screen">
        <div class="hero-text">ì•ˆë…•í•˜ì„¸ìš”.<br>ëˆ„êµ¬ì˜ ì§€ì›ê¸ˆì„<br>ì°¾ìœ¼ì‹œë‚˜ìš”?</div>
        
        <div class="role-card" onclick="selectRole('me')">
            <span class="role-icon">ğŸ™‹â€â™‚ï¸</span>
            <div class="role-title">ë‚´ ì§€ì›ê¸ˆ ì°¾ê¸°</div>
            <div class="role-desc">ê¹€ë¯¼ì¤€(ë³¸ì¸) ì‹ ì²­</div>
        </div>
        <div class="role-card" onclick="selectRole('family')">
            <span class="role-icon">ğŸ‘ª</span>
            <div class="role-title">ê°€ì¡± ëŒ€ì‹  ì‹ ì²­í•˜ê¸°</div>
            <div class="role-desc">ë¶€ëª¨ë‹˜, ì¡°ë¶€ëª¨ë‹˜ ëŒ€ë¦¬ ì‹ ì²­</div>
        </div>
    </div>

    <div id="screen-family-auth" class="screen">
        <div class="hero-text">ê°€ì¡±ì˜ ë™ì˜ê°€<br>í•„ìš”í•©ë‹ˆë‹¤.</div>
        <div class="sub-text">ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ëŒ€ë¦¬ ì‹ ì²­ ê¶Œí•œ<br>ìš”ì²­ ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.</div>

        <div class="input-group">
            <span class="input-label">ê°€ì¡± ì´ë¦„</span>
            <input type="text" id="family-name" class="input-field" placeholder="ì˜ˆ: ê¹€ì˜í¬" value="ê¹€ì˜í¬">
        </div>
        <div class="input-group">
            <span class="input-label">íœ´ëŒ€í° ë²ˆí˜¸</span>
            <input type="tel" class="input-field" placeholder="010-0000-0000" value="010-1234-5678">
        </div>
        <button class="big-btn" onclick="requestFamilyConsent()">ë™ì˜ ìš”ì²­ ë³´ë‚´ê¸°</button>
    </div>

    <div id="screen-list" class="screen">
        <div class="hero-text" id="list-header-text">ê¹€ë¯¼ì¤€ë‹˜,<br>ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</div>
        
        <div class="benefit-card" id="card-1" onclick="toggleCard(this)">
            <div class="checkbox">âœ”</div>
            <div class="info"><div class="b-title">ë³‘ì›ë¹„(ì˜ë£Œë¹„) ì§€ì›</div><div class="b-desc">ì—° ìµœëŒ€ 100ë§Œì›</div></div>
        </div>
        <div class="benefit-card" id="card-2" onclick="toggleCard(this)">
            <div class="checkbox">âœ”</div>
            <div class="info"><div class="b-title">ë‚œë°©ë¹„ ë°”ìš°ì²˜</div><div class="b-desc">ê²¨ìš¸ì²  20ë§Œì›</div></div>
        </div>
        <div class="benefit-card" id="card-3" onclick="toggleCard(this)" data-need-file="true">
            <div class="checkbox">âœ”</div>
            <div class="info">
                <div class="b-title">ê°€ì¡± ëŒë´„(ì˜ì¼€ì–´ëŸ¬) ì§€ì›</div>
                <div class="b-desc">ì—° 200ë§Œì› <span class="tag red">ì„œë¥˜ í•„ìˆ˜</span></div>
            </div>
        </div>
    </div>

    <div id="manual-bar" class="manual-bar" style="display:none;">
        <div style="font-size:14px; color:#666;">ì„ íƒí•œ í˜œíƒì„ ì‹ ì²­í•©ë‹ˆë‹¤</div>
        <button class="manual-btn" onclick="checkFlow()">ì‹ ì²­í•˜ê¸° ></button>
    </div>

    <div id="voice-bar" class="voice-bar">
        <div style="font-size:14px; color:#2ac1bc; font-weight:bold; margin-bottom:5px;">AI ë¹„ì„œê°€ ë“£ê³  ìˆìŠµë‹ˆë‹¤</div>
        <div class="wave-container"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        <div class="voice-transcript" id="transcript">"í•„ìš”í•œ ê±¸ ë§ì”€í•´ ì£¼ì„¸ìš”"</div>
        <button id="voice-submit-btn" class="manual-btn" style="width:90%; display:none; background:#2ac1bc;" onclick="checkFlow()">ë„¤, ì‹ ì²­í•´ ì£¼ì„¸ìš”</button>
    </div>

    <div id="screen-input" class="screen">
        <div class="hero-text">ì ê¹! ì„œë¥˜ê°€<br>í•„ìš”í•´ìš”.</div>
        <div class="sub-text">ê°€ì¡±ê´€ê³„ì¦ëª…ì„œë¥¼ ì œì¶œí•´ì•¼ í•©ë‹ˆë‹¤.<br>í¸í•œ ë°©ë²•ì„ ì„ íƒí•˜ì„¸ìš”.</div>

        <div class="option-card auto" onclick="processDoc('auto')">
            <span class="opt-icon">âš¡</span>
            <div class="opt-title">ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°</div>
            <div class="opt-desc">ì •ë¶€24ì—ì„œ ì¦‰ì‹œ ë°œê¸‰ (ì¶”ì²œ)</div>
        </div>
        <div class="option-card" onclick="processDoc('camera')">
            <span class="opt-icon">ğŸ“·</span>
            <div class="opt-title">ì§ì ‘ ì´¬ì˜í•˜ê¸°</div>
            <div class="opt-desc">ì¢…ì´ ì„œë¥˜ë¥¼ ì‚¬ì§„ìœ¼ë¡œ ì°ê¸°</div>
        </div>
    </div>

    <div id="loading-overlay" class="loading-overlay">
        <div class="doc-icon">â³</div>
        <h2 style="margin-bottom:10px;" id="loading-text">ì²˜ë¦¬ ì¤‘...</h2>
        <p id="loading-desc">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.</p>
    </div>

    <div id="screen-success" class="screen" style="text-align:center; justify-content:center;">
        <div style="font-size:60px;">ğŸ‰</div>
        <div class="hero-text" style="margin-top:20px;">ì‹ ì²­ ì™„ë£Œ!</div>
        <div class="sub-text">ëª¨ë“  ì ˆì°¨ê°€ ëë‚¬ìŠµë‹ˆë‹¤.<br>ê²°ê³¼ëŠ” ì¹´í†¡ìœ¼ë¡œ ì•Œë ¤ë“œë¦´ê²Œìš”.</div>
        <button class="big-btn" onclick="location.reload()">ì²˜ìŒìœ¼ë¡œ</button>
    </div>

</div>

<script>
    // --- 1. ì•± ì´ˆê¸° ì‹¤í–‰ (ìŠ¤í”Œë˜ì‹œ -> ì–´ë¥´ì‹  íŒì—…) ---
    window.onload = function() {
        const splash = document.getElementById('splash-screen');
        const seniorModal = document.getElementById('senior-modal');

        // í˜ì´ë“œ ì¸
        setTimeout(() => { splash.classList.add('show'); }, 100);
        // í˜ì´ë“œ ì•„ì›ƒ
        setTimeout(() => { splash.classList.remove('show'); }, 2500);
        // ëª¨ë‹¬ ë„ìš°ê¸°
        setTimeout(() => { splash.style.display = 'none'; seniorModal.style.display = 'flex'; }, 3700);
    }

    // --- 2. ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½ ë¡œì§ ---
    let pendingFamilyName = "";

    function showCustomAlert(title, desc, familyName) {
        document.getElementById('alert-title').innerText = title;
        document.getElementById('alert-desc').innerHTML = desc;
        document.getElementById('custom-alert').style.display = 'flex';
        pendingFamilyName = familyName;
    }

    function closeCustomAlert() {
        document.getElementById('custom-alert').style.display = 'none';
        
        // ì•Œë¦¼ì°½ ë‹«ìœ¼ë©´ ë¦¬ìŠ¤íŠ¸ í™”ë©´ìœ¼ë¡œ ì´ë™ + ì´ë¦„ ë°˜ì˜
        if(pendingFamilyName) {
            document.getElementById('list-header-text').innerHTML = pendingFamilyName + "ë‹˜ì„ ìœ„í•´<br>ë¬´ì—‡ì„ ì‹ ì²­í• ê¹Œìš”?";
            showScreen('screen-list');
            document.getElementById('manual-bar').style.display = 'flex';
        }
    }

    // --- 3. ì–´ë¥´ì‹  ìŒì„± ëª¨ë“œ ---
    function startVoiceMode() {
        document.getElementById('senior-modal').style.display = 'none';
        document.getElementById('list-header-text').innerHTML = "ê¹€ì² ìˆ˜ë‹˜,<br>ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?";
        showScreen('screen-list');
        document.getElementById('voice-bar').classList.add('active');
        simulateConversation();
    }
    function closeModal() {
        document.getElementById('senior-modal').style.display = 'none';
        showScreen('screen-role');
    }

    // --- 4. ì—­í•  ì„ íƒ & ìœ„ì„ í”„ë¡œì„¸ìŠ¤ ---
    function selectRole(type) {
        if(type === 'me') {
            document.getElementById('list-header-text').innerHTML = "ê¹€ë¯¼ì¤€ë‹˜,<br>ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?";
            showScreen('screen-list');
            document.getElementById('manual-bar').style.display = 'flex';
        } else {
            showScreen('screen-family-auth');
        }
    }

    function requestFamilyConsent() {
        const familyName = document.getElementById('family-name').value;
        showLoading("ì¹´ì¹´ì˜¤í†¡ ì „ì†¡ ì¤‘...", familyName + "ë‹˜ê»˜ ë™ì˜ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.");
        
        setTimeout(() => {
            hideLoading();
            // ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½ í˜¸ì¶œ
            showCustomAlert(
                "ìŠ¹ì¸ ì™„ë£Œ", 
                "âœ… <b>" + familyName + "</b>ë‹˜ì´ ëŒ€ë¦¬ ì‹ ì²­ì„<br>ìŠ¹ì¸í•˜ì…¨ìŠµë‹ˆë‹¤.", 
                familyName
            );
        }, 2000);
    }

    // --- 5. ìŒì„± ì‹œë®¬ë ˆì´ì…˜ ---
    function toggleCard(card) { card.classList.toggle('selected'); }
    function simulateConversation() {
        const transcript = document.getElementById('transcript');
        setTimeout(() => { transcript.innerText = "\"í—ˆë¦¬ê°€ ì•„íŒŒì„œ ë³‘ì›ë¹„ê°€...\""; }, 1500);
        setTimeout(() => { 
            transcript.innerText = "ì˜ë£Œë¹„ ì§€ì›ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤."; transcript.style.color = "#2ac1bc";
            selectCardById('card-1');
        }, 3000);
        setTimeout(() => { transcript.innerText = "\"í• ë¨¸ë‹ˆ ëŒë³´ëŠ” ì„œë¥˜ë„...\""; transcript.style.color = "#333"; }, 4500);
        setTimeout(() => { 
            transcript.innerText = "ê°€ì¡± ëŒë´„ ì§€ì›ë„ ì²´í¬í• ê²Œìš”."; transcript.style.color = "#2ac1bc";
            selectCardById('card-3');
        }, 6000);
        setTimeout(() => { 
            document.querySelector('.wave-container').style.display = 'none';
            transcript.innerText = "ì´ë ‡ê²Œ 2ê±´ ì‹ ì²­í• ê¹Œìš”?";
            document.getElementById('voice-submit-btn').style.display = 'block';
        }, 7500);
    }
    function selectCardById(id) {
        const card = document.getElementById(id);
        if(!card.classList.contains('selected')) {
            card.classList.add('selected');
            card.scrollIntoView({behavior: "smooth", block: "center"});
        }
    }

    // --- 6. íë¦„ ì œì–´ ---
    function checkFlow() {
        const selectedCards = document.querySelectorAll('.benefit-card.selected');
        let needFile = false;
        selectedCards.forEach(card => { if(card.getAttribute('data-need-file') === 'true') needFile = true; });
        document.getElementById('voice-bar').classList.remove('active');
        if(needFile) { showScreen('screen-input'); } 
        else { showScreen('screen-success'); }
    }

    // --- 7. ì„œë¥˜ ì œì¶œ ---
    function processDoc(type) {
        if(type === 'auto') { showLoading("ì„œë¥˜ ë°œê¸‰ ì¤‘...", "í–‰ì •ì•ˆì „ë¶€ ì„œë²„ì—ì„œ ê°€ì ¸ì˜¤ê³  ìˆìŠµë‹ˆë‹¤."); }
        else { showLoading("ì¹´ë©”ë¼ êµ¬ë™ ì¤‘...", "ì‚¬ì§„ì„ ì´¬ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤."); }
        setTimeout(() => { hideLoading(); showScreen('screen-success'); }, 2000);
    }

    // --- 8. ìœ í‹¸ë¦¬í‹° ---
    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if(id === 'screen-list' && !document.getElementById('voice-bar').classList.contains('active')) {
             document.getElementById('manual-bar').style.display = 'flex';
        } else { document.getElementById('manual-bar').style.display = 'none'; }
    }
    function showLoading(title, desc) {
        document.getElementById('loading-text').innerText = title;
        document.getElementById('loading-desc').innerText = desc;
        document.getElementById('loading-overlay').style.display = 'flex';
    }
    function hideLoading() { document.getElementById('loading-overlay').style.display = 'none'; }
</script>

</body>
</html>
