<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>í—¤ì•„ë¦¼ (Design Fix)</title>
    <style>
        /* ====================
           1. ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ
           ==================== */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            min-height: 100vh; margin: 0; user-select: none; 
        }

        .app-container { 
            width: 100%; height: 100vh; 
            background-color: white; position: relative; 
            display: flex; flex-direction: column; 
            
            /* ë‘¥ê·¼ ëª¨ì„œë¦¬ ë””ìì¸ */
            max-width: 485px; max-height: 880px; border-radius: 35px; overflow: hidden; 
            box-shadow: 0 0 30px rgba(0,0,0,0.5); 
        }

        @media (max-width: 480px) {
            .app-container { border-radius: 30px !important; margin: 0; }
        }

        /* í™”ë©´ ì „í™˜ìš© í´ë˜ìŠ¤ */
        .screen { 
            padding: 20px; flex: 1; display: none; 
            flex-direction: column; overflow-y: auto; padding-bottom: 100px; 
            scrollbar-width: none; -ms-overflow-style: none;
        }
        .screen::-webkit-scrollbar { display: none; }
        .screen.active { display: flex; }

        /* í…ìŠ¤íŠ¸ & ë²„íŠ¼ */
        .hero-text { font-size: 26px; font-weight: 800; margin-top: 50px; margin-bottom: 10px; color: #333; word-break: keep-all; letter-spacing: -0.5px; }
        .sub-text { color: #666; margin-bottom: 30px; line-height: 1.5; font-size: 15px; }
        .big-btn { 
            background-color: #3182f6; color: white; border: none; padding: 18px; 
            border-radius: 18px; font-size: 18px; font-weight: bold; cursor: pointer; 
            width: 100%; margin-top: auto; margin-bottom: 20px; 
            box-shadow: 0 4px 10px rgba(49, 130, 246, 0.3); transition: transform 0.1s;
        }
        .big-btn:active { transform: scale(0.98); }

        /* ====================
           2. ìŠ¤í”Œë˜ì‹œ (ë¡œë”©) í™”ë©´
           ==================== */
        #splash-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: white; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 1.2s ease-in-out;
        }
        #splash-screen.show { opacity: 1; } 
        
        .logo-img { 
            width: 120px; height: 120px; object-fit: contain; margin-bottom: 20px; 
            animation: pulse-logo 2.5s infinite ease-in-out; 
            filter: drop-shadow(0 10px 20px rgba(42, 193, 188, 0.3));
        }
        .logo-text { font-size: 40px; font-weight: 900; color: #2ac1bc; letter-spacing: -2px; margin-top: 5px; }
        @keyframes pulse-logo { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* ====================
           3. ì»¤ìŠ¤í…€ ì•Œë¦¼ì°½
           ==================== */
        .custom-alert-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6); z-index: 2000;
            backdrop-filter: blur(5px);
            display: none; justify-content: center; align-items: center;
        }
        .custom-alert-box {
            background: white; width: 80%; padding: 30px 20px; border-radius: 30px;
            text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        .alert-icon-circle { width: 60px; height: 60px; background: #e8f9e9; border-radius: 50%; display: flex; justify-content: center; align-items: center; margin: 0 auto 15px auto; color: #2e7d32; font-size: 30px; }
        .alert-title { font-size: 22px; font-weight: 800; color: #333; margin-bottom: 10px; }
        .alert-desc { font-size: 16px; color: #666; margin-bottom: 25px; line-height: 1.4; }
        .alert-btn { background-color: #3182f6; color: white; border: none; padding: 16px; border-radius: 15px; font-size: 17px; font-weight: bold; width: 100%; cursor: pointer; }

        /* ====================
           4. UI ì»´í¬ë„ŒíŠ¸
           ==================== */
        .senior-modal { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background-color: rgba(0,0,0,0.7); z-index: 1000; 
            backdrop-filter: blur(5px);
            display: flex; justify-content: center; align-items: center; 
        }
        .modal-content { background-color: white; width: 85%; border-radius: 30px; padding: 40px 25px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.4); }
        .btn-yes { background-color: #2ac1bc; color: white; padding: 20px; width: 100%; border-radius: 20px; border: none; font-size: 22px; font-weight: 800; margin-bottom: 15px; cursor: pointer; box-shadow: 0 5px 15px rgba(42, 193, 188, 0.4); }
        .btn-no { background-color: #f5f5f5; color: #888; padding: 15px; width: 100%; border-radius: 15px; border: none; font-size: 18px; font-weight: bold; cursor: pointer; }

        .role-card { background: #fff; border: 2px solid #f0f2f5; border-radius: 25px; padding: 35px 20px; margin-bottom: 20px; text-align: center; cursor: pointer; transition: 0.2s; display: flex; flex-direction: column; align-items: center; }
        .role-card:hover { border-color: #3182f6; background-color: #f7fbff; transform: translateY(-5px); box-shadow: 0 10px 20px rgba(49, 130, 246, 0.1); }
        .role-icon { font-size: 45px; margin-bottom: 15px; }
        .role-title { font-size: 22px; font-weight: bold; margin-bottom: 5px; color: #333; }
        .role-desc { font-size: 15px; color: #888; }

        .input-group { margin-bottom: 25px; }
        .input-label { display: block; font-weight: bold; margin-bottom: 10px; color: #333; font-size: 16px; }
        .input-field { width: 90%; padding: 18px; border: 2px solid #f0f2f5; border-radius: 15px; font-size: 18px; outline: none; transition: 0.3s; background: #f9f9f9; }
        .input-field:focus { border-color: #3182f6; background: white; }

        .benefit-card { background: #fff; border: 2px solid #f0f2f5; border-radius: 20px; padding: 25px; margin-bottom: 15px; display: flex; align-items: center; cursor: pointer; transition: 0.3s; }
        .benefit-card.selected { border-color: #3182f6; background-color: #f7fbff; transform: scale(1.02); box-shadow: 0 10px 20px rgba(49, 130, 246, 0.1); }
        .checkbox { width: 26px; height: 26px; border-radius: 50%; border: 2px solid #ddd; margin-right: 18px; display: flex; align-items: center; justify-content: center; color: transparent; background: white; transition: 0.2s; }
        .benefit-card.selected .checkbox { border-color: #3182f6; background-color: #3182f6; color: white; }
        .info { flex: 1; }
        .b-title { font-weight: bold; font-size: 18px; margin-bottom: 5px; }
        .b-desc { font-size: 14px; color: #888; }
        .tag { font-size: 12px; background: #eee; padding: 4px 8px; border-radius: 6px; color: #555; }
        .tag.red { background: #fff0f0; color: #f44336; font-weight: bold; }

        .option-card { border: 2px solid #f0f2f5; border-radius: 20px; padding: 25px; margin-bottom: 15px; text-align: center; cursor: pointer; transition: 0.2s; }
        .option-card:hover { border-color: #3182f6; background-color: #f7fbff; }
        .option-card.auto { background-color: #f0f7ff; border-color: #3182f6; }
        .option-card.auto .opt-title { color: #3182f6; }
        .opt-icon { font-size: 35px; margin-bottom: 12px; display: block; }
        .opt-title { font-weight: bold; font-size: 19px; margin-bottom: 5px; }
        .opt-desc { font-size: 14px; color: #666; }

        /* ====================
           5. í•˜ë‹¨ ë°” (Manual & Voice)
           ==================== */
        .manual-bar { position: absolute; bottom: 0; left: 0; width: 100%; background: white; padding: 25px 20px; box-shadow: 0 -5px 30px rgba(0,0,0,0.1); box-sizing: border-box; display: flex; justify-content: space-between; align-items: center; z-index: 50; border-radius: 30px 30px 0 0; }
        .manual-btn { background: #333; color: white; border: none; padding: 15px 30px; border-radius: 15px; font-weight: bold; font-size: 17px; cursor: pointer; }

        /* ìŒì„± ë¹„ì„œ ë°” (ìˆ˜ì •ë¨: ë†’ì´ ì¦ê°€ ë° ê°„ê²© ì¡°ì •) */
        .voice-bar { 
            position: absolute; bottom: 0; left: 0; width: 100%; 
            height: 350px; /* ë†’ì´ 300 -> 350pxë¡œ ì¦ê°€ */
            background: white; border-top-left-radius: 35px; border-top-right-radius: 35px; 
            box-shadow: 0 -5px 40px rgba(0,0,0,0.2); z-index: 100; 
            display: none; flex-direction: column; align-items: center; 
            padding-top: 30px; border-top: 6px solid #2ac1bc; 
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            transform: translateY(100%); 
        }
        .voice-bar.active { display: flex; transform: translateY(0); }
        
        /* ìŒì„± í…ìŠ¤íŠ¸ (ê°„ê²© ìˆ˜ì •) */
        .voice-header-text {
            font-size: 16px; color: #2ac1bc; font-weight: bold; 
            margin-bottom: 30px; /* ê¸€ìì™€ íŒŒí˜• ì‚¬ì´ ê°„ê²© ë„“í˜ */
        }

        .voice-transcript { 
            font-size: 22px; color: #333; font-weight: 800; 
            margin-bottom: 20px; text-align: center; padding: 0 20px; 
            height: 70px; display: flex; align-items: center; justify-content: center; 
            line-height: 1.3; 
        }
        
        .wave-container { display: flex; height: 50px; align-items: center; margin-bottom: 20px; }
        .bar { width: 8px; background: #2ac1bc; margin: 0 5px; border-radius: 4px; animation: sound 1s infinite ease-in-out; }
        .bar:nth-child(1) { height: 20px; animation-delay: 0.1s; } 
        .bar:nth-child(2) { height: 40px; animation-delay: 0.2s; } 
        .bar:nth-child(3) { height: 50px; animation-delay: 0.3s; }
        @keyframes sound { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(1.8); } }

        .loading-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.95); display: none; justify-content: center; align-items: center; flex-direction: column; z-index: 1500; text-align: center; backdrop-filter: blur(5px); }
        .spinner {
            width: 60px; height: 60px;
            border: 6px solid #e5e8eb; border-top: 6px solid #3182f6;
            border-radius: 50%; margin-bottom: 25px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="app-container">
    
    <div id="splash-screen">
        <img src="https://i.imgur.com/sdSwmX3.png" alt="í—¤ì•„ë¦¼ ë¡œê³ " class="logo-img">
        <div class="logo-text">í—¤ì•„ë¦¼</div>
    </div>

    <div id="custom-alert" class="custom-alert-overlay">
        <div class="custom-alert-box">
            <div class="alert-icon-circle">âœ…</div>
            <div class="alert-title" id="alert-title">ìŠ¹ì¸ ì™„ë£Œ</div>
            <div class="alert-desc" id="alert-desc">ê°€ì¡±ì˜ ë™ì˜ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.</div>
            <button class="alert-btn" onclick="closeCustomAlert()">í™•ì¸</button>
        </div>
    </div>

    <div id="senior-modal" class="senior-modal" style="display:none;">
        <div class="modal-content">
            <div style="font-size: 24px; font-weight: 800; margin-bottom: 25px; line-height: 1.4;">
                ê¸€ìê°€ ì‘ì•„ì„œ<br>ë¶ˆí¸í•˜ì‹œë©´<br><span style="color:#2ac1bc">í†µí™”ë¡œ í• ê¹Œìš”?</span>
            </div>
            <button class="btn-yes" onclick="startVoiceMode()">ë„¤, í†µí™”ë¡œ í• ê²Œìš”</button>
            <button class="btn-no" onclick="closeModal()">ì•„ë‹ˆìš”, ê´œì°®ìŠµë‹ˆë‹¤</button>
        </div>
    </div>

    <div id="screen-role" class="screen">
        <div class="hero-text">ì•ˆë…•í•˜ì„¸ìš”.<br>ëˆ„êµ¬ì˜ ì§€ì›ê¸ˆì„<br>ì°¾ìœ¼ì‹œë‚˜ìš”?</div>
        
        <div class="role-card" onclick="selectRole('me')">
            <span class="role-icon">ğŸ™‹â€â™‚ï¸</span>
            <div class="role-title">ë‚´ ì§€ì›ê¸ˆ ì°¾ê¸°</div>
            <div class="role-desc">ê¹€ë¯¼ì¤€(ë³¸ì¸) ì‹ ì²­</div>
        </div>
        <div class="role-card" onclick="selectRole('family')">
            <span class="role-icon">ğŸ‘ª</span>
            <div class="role-title">ê°€ì¡± ëŒ€ì‹  ì‹ ì²­í•˜ê¸°</div>
            <div class="role-desc">ë¶€ëª¨ë‹˜, ì¡°ë¶€ëª¨ë‹˜ ëŒ€ë¦¬ ì‹ ì²­</div>
        </div>
    </div>

    <div id="screen-family-auth" class="screen">
        <div class="hero-text">ê°€ì¡±ì˜ ë™ì˜ê°€<br>í•„ìš”í•©ë‹ˆë‹¤.</div>
        <div class="sub-text">ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ëŒ€ë¦¬ ì‹ ì²­ ê¶Œí•œ<br>ìš”ì²­ ë©”ì‹œì§€ë¥¼ ë³´ëƒ…ë‹ˆë‹¤.</div>

        <div class="input-group">
            <span class="input-label">ê°€ì¡± ì´ë¦„</span>
            <input type="text" id="family-name" class="input-field" placeholder="ì˜ˆ: ê¹€ì˜í¬" value="ê¹€ì˜í¬">
        </div>
        <div class="input-group">
            <span class="input-label">íœ´ëŒ€í° ë²ˆí˜¸</span>
            <input type="tel" class="input-field" placeholder="010-0000-0000" value="010-1234-5678">
        </div>
        <button class="big-btn" onclick="requestFamilyConsent()">ë™ì˜ ìš”ì²­ ë³´ë‚´ê¸°</button>
    </div>

    <div id="screen-list" class="screen">
        <div class="hero-text" id="list-header-text">ê¹€ë¯¼ì¤€ë‹˜,<br>ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?</div>
        
        <div class="benefit-card" id="card-1" onclick="toggleCard(this)">
            <div class="checkbox">âœ”</div>
            <div class="info"><div class="b-title">ë³‘ì›ë¹„(ì˜ë£Œë¹„) ì§€ì›</div><div class="b-desc">ì—° ìµœëŒ€ 100ë§Œì›</div></div>
        </div>
        <div class="benefit-card" id="card-2" onclick="toggleCard(this)">
            <div class="checkbox">âœ”</div>
            <div class="info"><div class="b-title">ë‚œë°©ë¹„ ë°”ìš°ì²˜</div><div class="b-desc">ê²¨ìš¸ì²  20ë§Œì›</div></div>
        </div>
        <div class="benefit-card" id="card-3" onclick="toggleCard(this)" data-need-file="true">
            <div class="checkbox">âœ”</div>
            <div class="info">
                <div class="b-title">ê°€ì¡± ëŒë´„(ì˜ì¼€ì–´ëŸ¬) ì§€ì›</div>
                <div class="b-desc">ì—° 200ë§Œì› <span class="tag red">ì„œë¥˜ í•„ìˆ˜</span></div>
            </div>
        </div>
    </div>

    <div id="manual-bar" class="manual-bar" style="display:none;">
        <div style="font-size:15px; color:#666; font-weight:bold;">ì„ íƒí•œ í˜œíƒì„ ì‹ ì²­í•©ë‹ˆë‹¤</div>
        <button class="manual-btn" onclick="checkFlow()">ì‹ ì²­í•˜ê¸° ></button>
    </div>

    <div id="voice-bar" class="voice-bar">
        <div class="voice-header-text">AI ë¹„ì„œê°€ ë“£ê³  ìˆìŠµë‹ˆë‹¤</div>
        <div class="wave-container"><div class="bar"></div><div class="bar"></div><div class="bar"></div></div>
        <div class="voice-transcript" id="transcript">"í•„ìš”í•œ ê±¸ ë§ì”€í•´ ì£¼ì„¸ìš”"</div>
        <button id="voice-submit-btn" class="manual-btn" style="width:90%; display:none; background:#2ac1bc;" onclick="checkFlow()">ë„¤, ì‹ ì²­í•´ ì£¼ì„¸ìš”</button>
    </div>

    <div id="screen-input" class="screen">
        <div class="hero-text">ì ê¹! ì„œë¥˜ê°€<br>í•„ìš”í•´ìš”.</div>
        <div class="sub-text">ê°€ì¡±ê´€ê³„ì¦ëª…ì„œë¥¼ ì œì¶œí•´ì•¼ í•©ë‹ˆë‹¤.<br>í¸í•œ ë°©ë²•ì„ ì„ íƒí•˜ì„¸ìš”.</div>

        <div class="option-card auto" onclick="processDoc('auto')">
            <span class="opt-icon">âš¡</span>
            <div class="opt-title">ìë™ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°</div>
            <div class="opt-desc">ì •ë¶€24ì—ì„œ ì¦‰ì‹œ ë°œê¸‰ (ì¶”ì²œ)</div>
        </div>
        <div class="option-card" onclick="processDoc('camera')">
            <span class="opt-icon">ğŸ“·</span>
            <div class="opt-title">ì§ì ‘ ì´¬ì˜í•˜ê¸°</div>
            <div class="opt-desc">ì¢…ì´ ì„œë¥˜ë¥¼ ì‚¬ì§„ìœ¼ë¡œ ì°ê¸°</div>
        </div>
    </div>

    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
        <h2 style="margin-bottom:10px;" id="loading-text">ì²˜ë¦¬ ì¤‘...</h2>
        <p id="loading-desc">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.</p>
    </div>

    <div id="screen-success" class="screen" style="text-align:center; justify-content:center;">
        <div style="font-size:70px; margin-bottom:20px;">ğŸ‰</div>
        <div class="hero-text" style="margin-top:0;">ì‹ ì²­ ì™„ë£Œ!</div>
        <div class="sub-text">ëª¨ë“  ì ˆì°¨ê°€ ëë‚¬ìŠµë‹ˆë‹¤.<br>ê²°ê³¼ëŠ” ì¹´í†¡ìœ¼ë¡œ ì•Œë ¤ë“œë¦´ê²Œìš”.</div>
        <button class="big-btn" onclick="resetApp()">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
    </div>

</div>

<script>
    // --- 1. ì•± ì´ˆê¸° ì‹¤í–‰ ---
    window.onload = function() {
        const splash = document.getElementById('splash-screen');
        const seniorModal = document.getElementById('senior-modal');

        setTimeout(() => { splash.classList.add('show'); }, 100);
        setTimeout(() => { splash.classList.remove('show'); }, 2500);
        setTimeout(() => { splash.style.display = 'none'; seniorModal.style.display = 'flex'; }, 3700);
    }

    // --- ì•± ë¦¬ì…‹ ---
    function resetApp() {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById('voice-bar').classList.remove('active');
        document.getElementById('manual-bar').style.display = 'none';
        document.getElementById('custom-alert').style.display = 'none';
        pendingFamilyName = "";
        document.getElementById('list-header-text').innerHTML = "ê¹€ë¯¼ì¤€ë‹˜,<br>ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?";
        document.querySelectorAll('.benefit-card').forEach(c => c.classList.remove('selected'));
        
        document.getElementById('splash-screen').style.display = 'none';
        document.getElementById('senior-modal').style.display = 'flex';
    }

    // --- 2. ì•Œë¦¼ì°½ ---
    let pendingFamilyName = "";
    function showCustomAlert(title, desc, familyName) {
        document.getElementById('alert-title').innerText = title;
        document.getElementById('alert-desc').innerHTML = desc;
        document.getElementById('custom-alert').style.display = 'flex';
        pendingFamilyName = familyName;
    }
    function closeCustomAlert() {
        document.getElementById('custom-alert').style.display = 'none';
        if(pendingFamilyName) {
            document.getElementById('list-header-text').innerHTML = pendingFamilyName + "ë‹˜ì„ ìœ„í•´<br>ë¬´ì—‡ì„ ì‹ ì²­í• ê¹Œìš”?";
            showScreen('screen-list');
            document.getElementById('manual-bar').style.display = 'flex';
        }
    }

    // --- 3. ì–´ë¥´ì‹  ìŒì„± ëª¨ë“œ ---
    function startVoiceMode() {
        document.getElementById('senior-modal').style.display = 'none';
        document.getElementById('list-header-text').innerHTML = "ê¹€ì² ìˆ˜ë‹˜,<br>ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?";
        showScreen('screen-list');
        document.getElementById('voice-bar').classList.add('active');
        simulateConversation();
    }
    function closeModal() {
        document.getElementById('senior-modal').style.display = 'none';
        showScreen('screen-role');
    }

    // --- 4. ì—­í•  ì„ íƒ ---
    function selectRole(type) {
        if(type === 'me') {
            document.getElementById('list-header-text').innerHTML = "ê¹€ë¯¼ì¤€ë‹˜,<br>ë¬´ì—‡ì„ ë„ì™€ë“œë¦´ê¹Œìš”?";
            showScreen('screen-list');
            document.getElementById('manual-bar').style.display = 'flex';
        } else {
            showScreen('screen-family-auth');
        }
    }

    function requestFamilyConsent() {
        const familyName = document.getElementById('family-name').value;
        showLoading("ì¹´ì¹´ì˜¤í†¡ ì „ì†¡ ì¤‘...", familyName + "ë‹˜ê»˜ ë™ì˜ ìš”ì²­ì„ ë³´ëƒˆìŠµë‹ˆë‹¤.");
        setTimeout(() => {
            hideLoading();
            showCustomAlert("ìŠ¹ì¸ ì™„ë£Œ", "âœ… <b>" + familyName + "</b>ë‹˜ì´ ëŒ€ë¦¬ ì‹ ì²­ì„<br>ìŠ¹ì¸í•˜ì…¨ìŠµë‹ˆë‹¤.", familyName);
        }, 2000);
    }

    // --- 5. ìŒì„± ì‹œë®¬ë ˆì´ì…˜ ---
    function toggleCard(card) { card.classList.toggle('selected'); }
    function simulateConversation() {
        const transcript = document.getElementById('transcript');
        setTimeout(() => { transcript.innerText = "\"í—ˆë¦¬ê°€ ì•„íŒŒì„œ ë³‘ì›ë¹„ê°€...\""; }, 1500);
        setTimeout(() => { 
            transcript.innerText = "ì˜ë£Œë¹„ ì§€ì›ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤."; transcript.style.color = "#2ac1bc";
            selectCardById('card-1');
        }, 3000);
        setTimeout(() => { transcript.innerText = "\"í• ë¨¸ë‹ˆ ëŒë³´ëŠ” ì„œë¥˜ë„...\""; transcript.style.color = "#333"; }, 4500);
        setTimeout(() => { 
            transcript.innerText = "ê°€ì¡± ëŒë´„ ì§€ì›ë„ ì²´í¬í• ê²Œìš”."; transcript.style.color = "#2ac1bc";
            selectCardById('card-3');
        }, 6000);
        setTimeout(() => { 
            document.querySelector('.wave-container').style.display = 'none';
            transcript.innerText = "ì´ë ‡ê²Œ 2ê±´ ì‹ ì²­í• ê¹Œìš”?";
            document.getElementById('voice-submit-btn').style.display = 'block';
        }, 7500);
    }
    function selectCardById(id) {
        const card = document.getElementById(id);
        if(!card.classList.contains('selected')) {
            card.classList.add('selected');
            card.scrollIntoView({behavior: "smooth", block: "center"});
        }
    }

    // --- 6. íë¦„ ì œì–´ (ë¡œë”© ì¶”ê°€) ---
    function checkFlow() {
        const selectedCards = document.querySelectorAll('.benefit-card.selected');
        let needFile = false;
        selectedCards.forEach(card => { if(card.getAttribute('data-need-file') === 'true') needFile = true; });
        
        document.getElementById('voice-bar').classList.remove('active');

        if(needFile) { 
            showScreen('screen-input'); 
        } else { 
            showLoading("ì‹ ì²­ì„œ ì ‘ìˆ˜ ì¤‘...", "ì •ë¶€24 ë° ì§€ìì²´ ì„œë²„ë¡œ<br>ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³  ìˆìŠµë‹ˆë‹¤.");
            setTimeout(() => {
                hideLoading();
                showScreen('screen-success'); 
            }, 2000);
        }
    }

    // --- 7. ì„œë¥˜ ì œì¶œ (ë‹¨ê³„ë³„ ë¦¬ì–¼ ë¡œë”©) ---
    function processDoc(type) {
        if(type === 'auto') { 
            showLoading("ì„œë¥˜ ë°œê¸‰ ì¤‘...", "í–‰ì •ì•ˆì „ë¶€ ì„œë²„ì—ì„œ<br>ê°€ì¡±ê´€ê³„ì¦ëª…ì„œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.");
            setTimeout(() => {
                document.getElementById('loading-text').innerText = "ì‹ ì²­ì„œ ì œì¶œ ì¤‘...";
                document.getElementById('loading-desc').innerHTML = "ê´€í•  ì§€ìì²´ë¡œ<br>ì„œë¥˜ë¥¼ ì „ì†¡í•˜ê³  ìˆìŠµë‹ˆë‹¤.";
                setTimeout(() => {
                    hideLoading();
                    showScreen('screen-success'); 
                }, 2000);
            }, 2000);
        } else { 
            showLoading("ì¹´ë©”ë¼ êµ¬ë™ ì¤‘...", "ì‚¬ì§„ì„ ì´¬ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤."); 
            setTimeout(() => { hideLoading(); showScreen('screen-success'); }, 2000);
        }
    }

    // --- 8. ìœ í‹¸ë¦¬í‹° ---
    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        if(id === 'screen-list' && !document.getElementById('voice-bar').classList.contains('active')) {
             document.getElementById('manual-bar').style.display = 'flex';
        } else { document.getElementById('manual-bar').style.display = 'none'; }
    }
    
    function showLoading(title, desc) {
        document.getElementById('loading-text').innerText = title;
        document.getElementById('loading-desc').innerHTML = desc; 
        document.getElementById('loading-overlay').style.display = 'flex';
    }
    function hideLoading() { document.getElementById('loading-overlay').style.display = 'none'; }
</script>

</body>
</html>
